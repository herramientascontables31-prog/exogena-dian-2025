<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ex√≥genaDIAN ‚Äî Portal Contable y Tributario para Colombia</title>
<meta name="description" content="Herramientas contables y tributarias para contadores colombianos. Ex√≥gena DIAN, calculadoras de retenci√≥n, IVA, renta, estados financieros y noticias tributarias.">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,600;0,9..144,700;1,9..144,400&display=swap" rel="stylesheet">
<style>
:root {
  --green-900: #064E3B; --green-800: #065F46; --green-700: #047857;
  --green-600: #059669; --green-500: #10B981; --green-400: #34D399;
  --green-300: #6EE7B7; --green-200: #A7F3D0; --green-100: #D1FAE5;
  --green-50: #ECFDF5; --mint: #F0FFF4;
  --white: #FFF; --gray-50: #F9FAFB; --gray-100: #F3F4F6;
  --gray-200: #E5E7EB; --gray-300: #D1D5DB; --gray-400: #9CA3AF;
  --gray-500: #6B7280; --gray-600: #4B5563; --gray-700: #374151;
  --gray-800: #1F2937; --gray-900: #111827;
  --blue-50: #EFF6FF; --blue-100: #DBEAFE; --blue-500: #3B82F6; --blue-700: #1D4ED8;
  --amber-50: #FFFBEB; --amber-100: #FEF3C7; --amber-500: #F59E0B; --amber-700: #92400E;
  --purple-50: #F5F3FF; --purple-100: #EDE9FE; --purple-500: #8B5CF6; --purple-700: #6D28D9;
  --rose-50: #FFF1F2; --rose-100: #FFE4E6; --rose-500: #F43F5E; --rose-700: #BE123C;
  --radius: 16px; --radius-sm: 10px;
  --shadow-sm: 0 1px 2px rgba(0,0,0,.05);
  --shadow: 0 4px 6px -1px rgba(0,0,0,.07), 0 2px 4px -2px rgba(0,0,0,.05);
  --shadow-lg: 0 20px 50px -12px rgba(0,0,0,.12);
  --shadow-xl: 0 25px 60px -12px rgba(5,150,105,.15);
}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:'Outfit',sans-serif;background:var(--white);color:var(--gray-900);overflow-x:hidden}

/* ===== NAV ===== */
nav{position:fixed;top:0;left:0;right:0;z-index:100;display:flex;align-items:center;justify-content:space-between;padding:14px 48px;background:rgba(255,255,255,.85);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid rgba(0,0,0,.04);transition:all .3s}
nav.scrolled{box-shadow:0 1px 20px rgba(0,0,0,.06)}
.logo{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--gray-900);font-weight:800;font-size:1.2rem;letter-spacing:-.02em}
.logo-mark{width:34px;height:34px;background:linear-gradient(135deg,var(--green-600),var(--green-400));border-radius:10px;display:grid;place-items:center;color:#fff;font-size:.85rem;font-weight:900}
.logo small{font-weight:400;font-size:.65rem;color:var(--gray-400);display:block;margin-top:-2px;letter-spacing:.04em}
.nav-links{display:flex;gap:28px;align-items:center}
.nav-links a{text-decoration:none;color:var(--gray-500);font-size:.88rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--gray-900)}
.btn{display:inline-flex;align-items:center;gap:8px;padding:12px 26px;border-radius:12px;font-family:'Outfit',sans-serif;font-weight:600;font-size:1rem;text-decoration:none;transition:all .2s;cursor:pointer;border:none}
.btn-green{background:var(--green-600);color:#fff}
.btn-green:hover{background:var(--green-700);transform:translateY(-1px);box-shadow:var(--shadow-xl)}
.btn-ghost{background:transparent;color:var(--gray-700);border:1.5px solid var(--gray-200)}
.btn-ghost:hover{border-color:var(--green-500);color:var(--green-700);background:var(--green-50)}
.btn-sm{padding:8px 16px;font-size:.82rem;border-radius:10px}
.btn-outline-green{background:transparent;color:var(--green-700);border:1.5px solid var(--green-300)}
.btn-outline-green:hover{background:var(--green-50)}
.hamburger{display:none;background:none;border:none;font-size:1.5rem;cursor:pointer;padding:8px;color:var(--gray-700)}
@media(max-width:900px){
  .hamburger{display:block}
  .nav-links{display:none;position:absolute;top:100%;left:0;right:0;background:var(--white);padding:16px 20px;flex-direction:column;gap:12px;border-top:1px solid var(--gray-200);box-shadow:0 8px 20px rgba(0,0,0,.08)}
  .nav-links.open{display:flex}
}

/* ===== HERO ===== */
.hero{min-height:auto;display:flex;align-items:center;padding:110px 48px 60px;position:relative;background:linear-gradient(170deg,var(--white) 0%,var(--green-50) 40%,var(--mint) 100%);overflow:hidden}
.hero::after{content:'';position:absolute;top:-30%;right:-15%;width:700px;height:700px;background:radial-gradient(circle,rgba(16,185,129,.12) 0%,transparent 70%);border-radius:50%;pointer-events:none}
.hero::before{content:'';position:absolute;bottom:-20%;left:-10%;width:500px;height:500px;background:radial-gradient(circle,rgba(52,211,153,.08) 0%,transparent 70%);border-radius:50%;pointer-events:none}
.hero-inner{max-width:1200px;width:100%;margin:0 auto;display:grid;grid-template-columns:1.1fr 1fr;gap:48px;align-items:center;position:relative;z-index:1}
.hero-text{animation:slideUp .7s ease-out}
.hero-pill{display:inline-flex;align-items:center;gap:8px;background:var(--white);border:1px solid var(--green-300);padding:7px 18px 7px 10px;border-radius:100px;font-size:.85rem;font-weight:600;color:var(--green-700);margin-bottom:20px;box-shadow:var(--shadow-sm)}
.pill-dot{width:8px;height:8px;background:var(--green-500);border-radius:50%;animation:pulse 2s infinite}
.hero h1{font-family:'Fraunces',serif;font-weight:700;font-size:clamp(2.8rem,5vw,4rem);line-height:1.05;color:var(--gray-900);margin-bottom:18px;letter-spacing:-.02em}
.hero h1 em{font-style:italic;font-weight:600;color:var(--green-600)}
.hero-desc{font-size:1.2rem;line-height:1.65;color:var(--gray-500);margin-bottom:28px;max-width:500px}
.hero-btns{display:flex;gap:12px;flex-wrap:wrap}
.hero-stats{display:flex;gap:36px;margin-top:32px;padding-top:24px;border-top:1px solid var(--green-200)}
.hero-stat{text-align:left}
.hero-stat strong{font-size:1.8rem;font-weight:800;color:var(--green-700);display:block;line-height:1}
.hero-stat span{font-size:.82rem;color:var(--gray-400);font-weight:500}

.hero-visual{animation:slideUp .7s .15s ease-out both;position:relative}
.tool-grid-hero{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.tool-mini{background:var(--white);border-radius:16px;padding:22px 20px;border:1px solid rgba(0,0,0,.06);box-shadow:var(--shadow);transition:all .3s;cursor:default}
.tool-mini:hover{transform:translateY(-3px);box-shadow:var(--shadow-lg)}
.tool-mini.main-tool{background:linear-gradient(135deg,var(--green-50),var(--white));border:1.5px solid var(--green-300);box-shadow:0 8px 30px rgba(5,150,105,.1)}
.tool-mini-icon{width:40px;height:40px;border-radius:10px;display:grid;place-items:center;font-size:1.1rem;margin-bottom:12px}
.tool-mini h4{font-size:1.05rem;font-weight:700;margin-bottom:4px}
.tool-mini p{font-size:.88rem;color:var(--gray-400);line-height:1.4}
.tool-mini-tags{display:flex;flex-wrap:wrap;gap:5px;margin-top:10px}
.tool-mini-tags span{padding:4px 9px;border-radius:6px;font-size:.72rem;font-weight:700;background:var(--green-100);color:var(--green-700)}
.tmi-green{background:var(--green-50);border:1px solid var(--green-100)}
.tmi-blue{background:var(--blue-50);border:1px solid var(--blue-100)}
.tmi-amber{background:var(--amber-50);border:1px solid var(--amber-100)}
.tmi-purple{background:var(--purple-50);border:1px solid var(--purple-100)}
.tmi-rose{background:var(--rose-50);border:1px solid var(--rose-100)}
.tmi-cyan{background:#ECFEFF;border:1px solid #A5F3FC}
.badge-free{display:inline-block;padding:3px 9px;border-radius:6px;font-size:.75rem;font-weight:700;background:var(--green-100);color:var(--green-700);margin-left:4px;vertical-align:middle}
.badge-premium{display:inline-block;padding:3px 9px;border-radius:6px;font-size:.75rem;font-weight:700;background:var(--amber-100);color:var(--amber-700);margin-left:4px;vertical-align:middle}
.badge-soon{display:inline-block;padding:3px 9px;border-radius:6px;font-size:.75rem;font-weight:700;background:var(--gray-100);color:var(--gray-500);margin-left:4px;vertical-align:middle}

/* ===== TOOLS ===== */
.tools{padding:80px 48px;max-width:1200px;margin:0 auto}
.section-tag{font-size:.8rem;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:var(--green-600);margin-bottom:10px}
.section-title{font-family:'Fraunces',serif;font-weight:700;font-size:clamp(2rem,3.5vw,2.8rem);margin-bottom:12px;letter-spacing:-.01em}
.section-desc{color:var(--gray-500);font-size:1.1rem;max-width:540px;line-height:1.6;margin-bottom:44px}
.tools-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
.tool-card{background:var(--white);border-radius:20px;padding:32px 26px 26px;border:1.5px solid var(--gray-200);transition:all .35s;position:relative;display:flex;flex-direction:column}
.tool-card:hover{transform:translateY(-5px);box-shadow:var(--shadow-lg);border-color:var(--green-300)}
.tool-card.featured{border-color:var(--green-400);background:linear-gradient(180deg,var(--green-50) 0%,var(--white) 40%)}
.tool-card.featured::before{content:'PRINCIPAL';position:absolute;top:-11px;left:24px;background:linear-gradient(135deg,var(--green-500),var(--green-400));color:var(--white);font-size:.62rem;font-weight:800;letter-spacing:1.5px;padding:4px 14px;border-radius:20px;box-shadow:0 4px 12px rgba(16,185,129,.3)}
.tool-icon{width:56px;height:56px;border-radius:14px;display:grid;place-items:center;font-size:1.5rem;margin-bottom:16px}
.tool-card h3{font-size:1.15rem;font-weight:700;margin-bottom:8px}
.tool-card .tool-desc{color:var(--gray-500);font-size:.95rem;line-height:1.55;flex:1;margin-bottom:16px}
.tool-status{display:flex;align-items:center;gap:6px;font-size:.82rem;font-weight:600;margin-top:auto}
.ts-live{color:var(--green-600)}
.ts-live::before{content:'';width:7px;height:7px;background:var(--green-500);border-radius:50%;display:inline-block;animation:pulse 2s infinite}
.ts-soon{color:var(--gray-400)}
.ts-soon::before{content:'';width:7px;height:7px;background:var(--gray-300);border-radius:50%;display:inline-block}
.ts-free{color:var(--blue-500)}

/* ===== EXOGENA (main product) ===== */
.exogena{padding:80px 48px;background:var(--gray-50)}
.exogena-inner{max-width:1200px;margin:0 auto}
.exo-grid{display:grid;grid-template-columns:1fr 1fr;gap:56px;align-items:center;margin-top:40px}
.exo-features{display:flex;flex-direction:column;gap:16px}
.exo-feat{display:flex;gap:14px;padding:16px 18px;background:var(--white);border-radius:14px;border:1px solid var(--gray-200);transition:all .25s}
.exo-feat:hover{border-color:var(--green-300);box-shadow:var(--shadow)}
.exo-feat-icon{width:44px;height:44px;border-radius:10px;background:var(--green-50);border:1px solid var(--green-100);display:grid;place-items:center;font-size:1.2rem;flex-shrink:0}
.exo-feat h4{font-size:1rem;font-weight:700;margin-bottom:4px}
.exo-feat p{font-size:.9rem;color:var(--gray-500);line-height:1.45}
.fmt-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
.fmt-pill{background:var(--white);border:1.5px solid var(--gray-200);border-radius:12px;padding:16px 14px;text-align:center;font-weight:700;font-size:1.05rem;color:var(--green-700);transition:all .25s;cursor:default}
.fmt-pill span{display:block;font-size:.75rem;font-weight:500;color:var(--gray-400);margin-top:3px}
.fmt-pill:hover{border-color:var(--green-400);background:var(--green-50);transform:translateY(-2px)}

/* ===== HOW IT WORKS ===== */
.steps{padding:80px 48px;max-width:1200px;margin:0 auto}
.steps-row{display:grid;grid-template-columns:repeat(4,1fr);gap:24px;margin-top:40px;position:relative}
.steps-row::before{content:'';position:absolute;top:30px;left:13%;right:13%;height:2px;background:linear-gradient(90deg,var(--green-300),var(--green-200),var(--green-300));z-index:0}
.step{text-align:center;position:relative;z-index:1}
.step-circle{width:48px;height:48px;border-radius:50%;margin:0 auto 12px;background:var(--green-600);color:#fff;font-family:'Fraunces',serif;font-size:1.2rem;font-weight:700;display:grid;place-items:center;box-shadow:0 4px 14px rgba(5,150,105,.3)}
.step h3{font-size:1rem;font-weight:700;margin-bottom:5px}
.step p{font-size:.88rem;color:var(--gray-500);line-height:1.45}

/* ===== PRICING ===== */
.pricing{padding:90px 48px;position:relative;overflow:hidden;background:linear-gradient(160deg,var(--green-900) 0%,#065F46 40%,var(--green-700) 100%)}
.pricing::before{content:'';position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23fff' fill-opacity='.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/svg%3E");pointer-events:none}
.pricing .section-tag{color:var(--green-300);text-align:center;position:relative;z-index:1}
.pricing .section-title{color:#fff;text-align:center;position:relative;z-index:1}
.pricing .section-desc{color:rgba(255,255,255,.5);text-align:center;max-width:520px;margin:0 auto 48px;position:relative;z-index:1}
.price-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;max-width:1020px;margin:0 auto;position:relative;z-index:1;align-items:stretch}
.price-card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.1);border-radius:22px;padding:36px 26px 28px;display:flex;flex-direction:column;backdrop-filter:blur(10px);transition:all .35s}
.price-card:hover{transform:translateY(-5px);box-shadow:0 20px 60px rgba(0,0,0,.25);border-color:rgba(255,255,255,.15)}
.price-card.pop{background:rgba(16,185,129,.1);border-color:rgba(52,211,153,.3);transform:scale(1.03);box-shadow:0 12px 40px rgba(16,185,129,.12)}
.price-card.pop:hover{transform:scale(1.03) translateY(-5px)}
.pop-badge{position:absolute;top:-12px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,var(--green-400),var(--green-300));color:var(--green-900);font-size:.65rem;font-weight:800;letter-spacing:1.5px;text-transform:uppercase;padding:5px 18px;border-radius:30px;white-space:nowrap;box-shadow:0 4px 14px rgba(52,211,153,.3)}
.price-label{color:rgba(255,255,255,.4);font-size:.82rem;letter-spacing:2.5px;text-transform:uppercase;margin-bottom:4px;font-weight:600}
.price-name{color:#fff;font-size:1.35rem;font-weight:700;margin-bottom:18px}
.price-val{display:flex;align-items:baseline;gap:2px;margin-bottom:4px}
.price-sign{color:rgba(255,255,255,.4);font-size:1rem;font-weight:700;align-self:flex-start;margin-top:6px}
.price-num{color:#fff;font-size:2.6rem;font-weight:800;line-height:1;letter-spacing:-2px}
.price-per{color:rgba(255,255,255,.3);font-size:.78rem;margin-bottom:22px;padding-bottom:22px;border-bottom:1px solid rgba(255,255,255,.07)}
.price-list{list-style:none;padding:0;margin:0 0 28px;flex:1}
.price-list li{color:rgba(255,255,255,.6);font-size:.95rem;padding:5px 0;display:flex;align-items:flex-start;gap:8px;line-height:1.5}
.price-list li::before{content:'‚úì';color:var(--green-400);font-weight:700;flex-shrink:0}
.price-list li.hl{color:var(--green-300);font-weight:600}
.wompi-btn-container{margin-top:auto}
.wompi-btn-container form{width:100%}
.wompi-btn-container form button,
.wompi-btn-container button,
.wompi-btn-container .waybox-button,
.wompi-btn-container [class*="wompi"]{
  width:100%!important;padding:14px 24px!important;border-radius:12px!important;
  font-family:'Outfit',sans-serif!important;font-weight:700!important;font-size:1rem!important;
  background:linear-gradient(135deg,var(--green-400),var(--green-300))!important;
  color:var(--green-900)!important;border:none!important;cursor:pointer!important;
  transition:all .25s!important;box-shadow:0 4px 14px rgba(52,211,153,.3)!important;
  letter-spacing:.02em!important;
}
.wompi-btn-container form button:hover,
.wompi-btn-container button:hover,
.wompi-btn-container .waybox-button:hover{
  transform:translateY(-2px)!important;
  box-shadow:0 8px 24px rgba(52,211,153,.4)!important;
}
/* Fallback: si Wompi no carga, mostrar bot√≥n alternativo */
.wompi-fallback{display:none;width:100%;padding:14px 24px;border-radius:12px;
  font-family:'Outfit',sans-serif;font-weight:700;font-size:1rem;
  background:linear-gradient(135deg,var(--green-400),var(--green-300));
  color:var(--green-900);border:none;cursor:pointer;text-align:center;
  transition:all .25s;box-shadow:0 4px 14px rgba(52,211,153,.3);text-decoration:none}
.wompi-fallback:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(52,211,153,.4)}
.price-foot{text-align:center;margin-top:36px;position:relative;z-index:1}
.price-trust{color:rgba(255,255,255,.35);font-size:.82rem;margin-bottom:14px}
.price-trust span{color:rgba(255,255,255,.55)}
.pay-methods{display:flex;align-items:center;justify-content:center;gap:10px;flex-wrap:wrap}
.pay-methods span{color:rgba(255,255,255,.3);font-size:.72rem;padding:4px 10px;border:1px solid rgba(255,255,255,.08);border-radius:8px;background:rgba(255,255,255,.02)}



/* ===== NEWS ===== */
.news{padding:80px 48px;background:var(--gray-50)}
.news-inner{max-width:1200px;margin:0 auto}
.news-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:40px}
.news-card{background:var(--white);border-radius:14px;padding:22px;border:1px solid var(--gray-200);transition:all .25s;display:flex;flex-direction:column}
.news-card:hover{border-color:var(--green-300);box-shadow:var(--shadow)}
.news-card-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.news-card-source{font-size:.7rem;font-weight:600;color:var(--gray-400);display:flex;align-items:center;gap:6px}
.news-card-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}
.ncd-blue{background:#1a73e8}.ncd-red{background:#c41230}.ncd-green{background:var(--green-600)}.ncd-purple{background:#472580}.ncd-ai{background:#FF6B35}
.news-card-date{font-size:.68rem;color:var(--gray-400)}
.news-card h3{font-size:.88rem;font-weight:600;line-height:1.45;color:var(--gray-800);flex:1}
.news-card h3 a{color:inherit;text-decoration:none;transition:color .2s}
.news-card h3 a:hover{color:var(--green-600)}
.news-fuentes{text-align:center;margin-top:24px;font-size:.74rem;color:var(--gray-400)}
.news-fuentes a{color:var(--gray-500);text-decoration:none;margin:0 4px}
.news-fuentes a:hover{color:var(--green-600)}

/* ===== CTA ===== */
.cta{padding:80px 48px;text-align:center;background:var(--white)}
.cta-card{max-width:800px;margin:0 auto;background:linear-gradient(135deg,var(--green-600),var(--green-500));border-radius:28px;padding:60px 48px;position:relative;overflow:hidden}
.cta-card::before{content:'';position:absolute;top:-40%;right:-15%;width:50%;height:140%;background:radial-gradient(circle,rgba(255,255,255,.12) 0%,transparent 70%);pointer-events:none}
.cta-card h2{font-family:'Fraunces',serif;font-weight:700;font-size:clamp(1.8rem,3.5vw,2.5rem);color:#fff;margin-bottom:14px;position:relative}
.cta-card p{color:rgba(255,255,255,.75);font-size:1.1rem;margin-bottom:28px;position:relative}
.btn-white{background:#fff;color:var(--green-700);font-size:1.05rem;font-weight:700;padding:14px 32px;border-radius:12px;display:inline-flex;align-items:center;gap:8px;text-decoration:none;font-family:'Outfit',sans-serif;transition:all .25s;border:none;cursor:pointer}
.btn-white:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,0,0,.15)}

/* ===== WHATSAPP ===== */
.wa-float{position:fixed;bottom:24px;right:24px;z-index:99;width:56px;height:56px;background:#25D366;border-radius:50%;display:grid;place-items:center;box-shadow:0 6px 24px rgba(37,211,102,.4);transition:all .3s;text-decoration:none;font-size:1.6rem}
.wa-float:hover{transform:scale(1.08);box-shadow:0 8px 30px rgba(37,211,102,.5)}

/* ===== FOOTER ===== */
footer{padding:48px 48px 36px;background:var(--gray-900);color:var(--gray-400)}
.footer-inner{max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:40px;margin-bottom:36px}
.footer-brand h4{font-family:'Fraunces',serif;color:var(--white);font-size:1.2rem;margin-bottom:8px}
.footer-brand p{font-size:.9rem;line-height:1.6;color:var(--gray-500)}
.footer-col h5{color:var(--gray-300);font-size:.82rem;text-transform:uppercase;letter-spacing:.1em;margin-bottom:12px}
.footer-col a{display:block;color:var(--gray-500);font-size:.9rem;text-decoration:none;padding:3px 0;transition:color .2s}
.footer-col a:hover{color:var(--green-400)}
.footer-bottom{padding-top:24px;border-top:1px solid rgba(255,255,255,.06);text-align:center;font-size:.82rem;color:var(--gray-600);line-height:1.8}

/* ===== ANIMATIONS ===== */
@keyframes slideUp{from{opacity:0;transform:translateY(28px)}to{opacity:1;transform:translateY(0)}}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(1.4)}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
.fade-in{opacity:0;transform:translateY(20px);transition:all .5s ease-out}
.fade-in.visible{opacity:1;transform:translateY(0)}

/* ===== RESPONSIVE ===== */
@media(max-width:900px){
  nav{padding:12px 20px}
  .hero{padding:90px 20px 40px}.hero-inner{grid-template-columns:1fr;gap:28px}.hero-stats{gap:20px}
  .tools{padding:50px 20px}.tools-grid{grid-template-columns:1fr}
  .exogena{padding:50px 20px}.exo-grid{grid-template-columns:1fr;gap:32px}
  .steps{padding:50px 20px}.steps-row{grid-template-columns:1fr 1fr;gap:16px}.steps-row::before{display:none}
  .pricing{padding:50px 20px}.price-grid{grid-template-columns:1fr;max-width:400px;margin:0 auto}
  .price-card.pop{transform:scale(1);order:-1}.price-card.pop:hover{transform:translateY(-5px)}
  .news{padding:50px 20px}.news-grid{grid-template-columns:1fr}
  .cta{padding:50px 20px}.cta-card{padding:40px 22px}
  footer{padding:32px 20px 24px}.footer-grid{grid-template-columns:1fr 1fr;gap:24px}
}
</style>
</head>
<body>

<!-- ===== NAV ===== -->
<nav id="nav">
  <a href="#" class="logo">
    <div class="logo-mark">E</div>
    <div>Ex√≥genaDIAN<small>Portal Contable</small></div>
  </a>
  <div class="nav-links" id="navLinks">
    <a href="#herramientas">Herramientas</a>
    <a href="#exogena">Ex√≥gena</a>
    <a href="#noticias">Noticias</a>
    <a href="#planes">Planes</a>
    <a href="#planes" class="btn btn-green btn-sm">Contratar ‚Üí</a>
  </div>
  <button class="hamburger" id="hamburger" onclick="document.getElementById('navLinks').classList.toggle('open')">‚ò∞</button>
</nav>

<!-- ===== HERO ===== -->
<section class="hero">
  <div class="hero-inner">
    <div class="hero-text">
      <div class="hero-pill"><div class="pill-dot"></div> AG 2025 ¬∑ Resoluci√≥n 000227 ¬∑ UVT $49.799</div>
      <h1>Todas tus herramientas <em>contables</em> en un solo lugar</h1>
      <p class="hero-desc">Ex√≥gena DIAN, calculadoras tributarias, estados financieros y noticias. Todo lo que un contador colombiano necesita para el cierre fiscal.</p>
      <div class="hero-btns">
        <a href="#planes" class="btn btn-green">Generar Ex√≥gena ‚Üí</a>
        <a href="#herramientas" class="btn btn-ghost">Herramientas gratis</a>
      </div>
      <div class="hero-stats">
        <div class="hero-stat"><strong>10</strong><span>Formatos ex√≥gena</span></div>
        <div class="hero-stat"><strong>2</strong><span>Herramientas gratis</span></div>
        <div class="hero-stat"><strong>24h</strong><span>Tiempo de entrega</span></div>
      </div>
    </div>

    <div class="hero-visual">
      <div class="tool-grid-hero">
        <div class="tool-mini main-tool" style="grid-column:span 2;animation:float 5s ease-in-out infinite">
          <div class="tool-mini-icon tmi-green" style="width:44px;height:44px;font-size:1.3rem">üìä</div>
          <h4>Informaci√≥n Ex√≥gena DIAN <span class="badge-premium">Premium</span></h4>
          <p>10 formatos + prevalidador + generador XML para el MUISCA</p>
          <div class="tool-mini-tags">
            <span>F1001</span><span>F1003</span><span>F1005</span><span>F1007</span><span>F2276</span><span>+5</span>
          </div>
        </div>
        <div class="tool-mini" style="animation:float 5s .8s ease-in-out infinite">
          <div class="tool-mini-icon tmi-blue">üßÆ</div>
          <h4>Retenci√≥n en la Fuente <span class="badge-free">Gratis</span></h4>
          <p>Formulario 350 completo</p>
        </div>
        <div class="tool-mini" style="animation:float 5s 1.6s ease-in-out infinite">
          <div class="tool-mini-icon tmi-amber">üìã</div>
          <h4>Declaraci√≥n de IVA <span class="badge-soon">Pronto</span></h4>
          <p>Formulario 300 bimestral</p>
        </div>
        <div class="tool-mini" style="animation:float 5s 2.4s ease-in-out infinite">
          <div class="tool-mini-icon tmi-purple">üìë</div>
          <h4>Declaraci√≥n de Renta <span class="badge-soon">Pronto</span></h4>
          <p>F110 jur√≠dicas ¬∑ F210 naturales</p>
        </div>
        <div class="tool-mini" style="animation:float 5s 3.2s ease-in-out infinite">
          <div class="tool-mini-icon tmi-rose">üìÑ</div>
          <h4>Estados Financieros <span class="badge-soon">Pronto</span></h4>
          <p>NIIF con notas y pol√≠ticas</p>
        </div>
        <div class="tool-mini" style="animation:float 5s 4s ease-in-out infinite">
          <div class="tool-mini-icon tmi-cyan">üè¶</div>
          <h4>Conciliaci√≥n Bancaria <span class="badge-free">Gratis</span></h4>
          <p>Extracto vs libro auxiliar</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ===== HERRAMIENTAS ===== -->
<section class="tools fade-in" id="herramientas">
  <div class="section-tag">Herramientas</div>
  <h2 class="section-title">Todo para el cierre fiscal 2025</h2>
  <p class="section-desc">Un ecosistema completo de herramientas contables y tributarias. Algunas gratuitas, otras premium.</p>

  <div class="tools-grid">
    <!-- EXOGENA -->
    <a href="#planes" class="tool-card featured" style="text-decoration:none;color:inherit">
      <div class="tool-icon tmi-green">üìä</div>
      <h3>Informaci√≥n Ex√≥gena + XML</h3>
      <p class="tool-desc">Genera los 10 formatos de ex√≥gena desde tu balance de prueba. Incluye prevalidador y generador XML para el MUISCA.</p>
      <div class="tool-status ts-live">Disponible ahora</div>
    </a>
    <!-- RETENCION -->
    <a href="retencion350.html" class="tool-card" style="text-decoration:none;color:inherit">
      <div class="tool-icon tmi-blue">üßÆ</div>
      <h3>Retenci√≥n en la Fuente</h3>
      <p class="tool-desc">Calculadora del formulario 350. Ingresa bases por concepto y obt√©n la declaraci√≥n lista con totales y sanciones.</p>
      <div class="tool-status ts-free">Gratis ¬∑ Disponible</div>
    </a>
    <!-- IVA -->
    <div class="tool-card" style="opacity:0.7">
      <div class="tool-icon tmi-amber">üìã</div>
      <h3>Declaraci√≥n de IVA</h3>
      <p class="tool-desc">Calculadora del formulario 300. IVA generado, descontable, retenciones que le practicaron y saldo a pagar/favor.</p>
      <div class="tool-status ts-soon">Pr√≥ximamente</div>
    </div>
    <!-- RENTA -->
    <div class="tool-card" style="opacity:0.7">
      <div class="tool-icon tmi-purple">üìë</div>
      <h3>Declaraci√≥n de Renta</h3>
      <p class="tool-desc">Formulario 110 (jur√≠dicas) y 210 (naturales). Depuraci√≥n por c√©dulas, l√≠mites, descuentos y anticipo de renta.</p>
      <div class="tool-status ts-soon">Pr√≥ximamente</div>
    </div>
    <!-- ESTADOS FINANCIEROS -->
    <div class="tool-card" style="opacity:0.7">
      <div class="tool-icon tmi-rose">üìÑ</div>
      <h3>Estados Financieros NIIF</h3>
      <p class="tool-desc">Genera estados de situaci√≥n financiera, resultados, cambios en patrimonio. Con notas revelatorias y pol√≠ticas contables.</p>
      <div class="tool-status ts-soon">Pr√≥ximamente</div>
    </div>
    <!-- CONCILIACION BANCARIA -->
    <a href="conciliacion.html" class="tool-card" style="text-decoration:none;color:inherit">
      <div class="tool-icon tmi-cyan">üè¶</div>
      <h3>Conciliaci√≥n Bancaria</h3>
      <p class="tool-desc">Sube el extracto bancario y el libro auxiliar. Cruza autom√°ticamente partidas e identifica diferencias. Gratis hasta 50 filas.</p>
      <div class="tool-status ts-free">Gratis ¬∑ Disponible</div>
    </a>
  </div>
</section>

<!-- ===== EX√ìGENA DETALLE ===== -->
<section class="exogena fade-in" id="exogena">
  <div class="exogena-inner">
    <div class="section-tag">Producto Principal</div>
    <h2 class="section-title">Informaci√≥n Ex√≥gena DIAN</h2>
    <p class="section-desc">Env√≠a tu balance de prueba y recibe los 10 formatos listos para el prevalidador. Sin software, sin complicaciones.</p>

    <div class="exo-grid">
      <div class="exo-features">
        <div class="exo-feat">
          <div class="exo-feat-icon">üß†</div>
          <div><h4>Clasificaci√≥n inteligente</h4><p>Detecta concepto DIAN por c√≥digo PUC y nombre de cuenta. N√≥mina, honorarios, arriendos, servicios y m√°s.</p></div>
        </div>
        <div class="exo-feat">
          <div class="exo-feat-icon">üåê</div>
          <div><h4>Directorio de terceros</h4><p>Base centralizada con 200+ empresas colombianas e internacionales. Completa direcciones autom√°ticamente.</p></div>
        </div>
        <div class="exo-feat">
          <div class="exo-feat-icon">‚úÖ</div>
          <div><h4>Prevalidador + XML</h4><p>Valida todos los campos requeridos por la DIAN. Genera los XML listos para cargar al portal MUISCA.</p></div>
        </div>
        <div class="exo-feat">
          <div class="exo-feat-icon">üìê</div>
          <div><h4>Cuant√≠as menores y DV</h4><p>Acumula terceros bajo topes UVT. Calcula d√≠gito de verificaci√≥n y distribuye retenciones proporcionalmente.</p></div>
        </div>
      </div>

      <div>
        <div class="fmt-grid">
          <div class="fmt-pill">1001 <span>Pagos y abonos</span></div>
          <div class="fmt-pill">1003 <span>Retenciones</span></div>
          <div class="fmt-pill">1005 <span>IVA descontable</span></div>
          <div class="fmt-pill">1006 <span>IVA generado</span></div>
          <div class="fmt-pill">1007 <span>Ingresos</span></div>
          <div class="fmt-pill">1008 <span>Cuentas √ó cobrar</span></div>
          <div class="fmt-pill">1009 <span>Cuentas √ó pagar</span></div>
          <div class="fmt-pill">1010 <span>Socios</span></div>
          <div class="fmt-pill">1012 <span>Inversiones</span></div>
          <div class="fmt-pill">2276 <span>Rentas de trabajo</span></div>
        </div>
        <div style="margin-top:20px;text-align:center">
          <a href="#planes" class="btn btn-green">Ver planes ‚Üí</a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ===== C√ìMO FUNCIONA ===== -->
<section class="steps fade-in" id="como-funciona">
  <div class="section-tag">Proceso</div>
  <h2 class="section-title">En 4 pasos simples</h2>
  <div class="steps-row">
    <div class="step"><div class="step-circle">1</div><h3>Elige tu plan</h3><p>Selecciona y paga seguro con Wompi</p></div>
    <div class="step"><div class="step-circle">2</div><h3>Env√≠a tu balance</h3><p>Por WhatsApp, adjuntando el Excel</p></div>
    <div class="step"><div class="step-circle">3</div><h3>Lo procesamos</h3><p>Clasificamos, validamos y generamos</p></div>
    <div class="step"><div class="step-circle">4</div><h3>Recibe tu Excel</h3><p>Listo para el prevalidador DIAN</p></div>
  </div>
</section>

<!-- ===== PRECIOS ===== -->
<section class="pricing fade-in" id="planes">
  <div class="section-tag">Planes ‚Äî Ex√≥gena</div>
  <h2 class="section-title">Elige el plan ideal para ti</h2>
  <p class="section-desc">Paga en l√≠nea y env√≠anos tu balance por WhatsApp. Recibes tu Excel listo en menos de 24 horas.</p>
  <div class="price-grid">
    <div class="price-card">
      <p class="price-label">Individual</p>
      <h3 class="price-name">1 Ex√≥gena</h3>
      <div class="price-val"><span class="price-sign">$</span><span class="price-num">110.000</span></div>
      <p class="price-per">Pago √∫nico ¬∑ 1 empresa</p>
      <ul class="price-list">
        <li>1 balance procesado</li>
        <li>10 formatos generados</li>
        <li>B√∫squeda de direcciones incluida</li>
        <li>Excel + XML para MUISCA</li>
        <li>Entrega por WhatsApp &lt; 24h</li>
      </ul>
      <div class="wompi-btn-container">
        <script src="https://checkout.wompi.co/widget.js" data-render="button" data-public-key="pub_prod_GrX0IYZSq3PZUDCgQDYJTOJBgwUYbFbt" data-currency="COP" data-amount-in-cents="11000000" data-reference="EXOGENA-IND-001" data-redirect-url="https://exogenadian.com/gracias.html"></script>
        <a href="https://wa.me/573156178610?text=Hola%2C%20quiero%20contratar%20el%20plan%20Individual%20de%20Ex%C3%B3gena%20DIAN" target="_blank" class="wompi-fallback" id="fallback-ind">Contratar por WhatsApp ‚Üí</a>
      </div>
    </div>
    <div class="price-card pop" style="position:relative">
      <span class="pop-badge">‚≠ê M√°s popular</span>
      <p class="price-label">Contador</p>
      <h3 class="price-name">3 Ex√≥genas</h3>
      <div class="price-val"><span class="price-sign">$</span><span class="price-num">205.000</span></div>
      <p class="price-per">Pago √∫nico ¬∑ Hasta 3 empresas</p>
      <ul class="price-list">
        <li>3 balances procesados</li>
        <li>10 formatos por cada balance</li>
        <li>B√∫squeda de direcciones incluida</li>
        <li>Excel + XML para MUISCA</li>
        <li>Entrega por WhatsApp &lt; 24h</li>
        <li class="hl">Ahorra $125.000 vs individual</li>
      </ul>
      <div class="wompi-btn-container">
        <script src="https://checkout.wompi.co/widget.js" data-render="button" data-public-key="pub_prod_GrX0IYZSq3PZUDCgQDYJTOJBgwUYbFbt" data-currency="COP" data-amount-in-cents="20500000" data-reference="EXOGENA-CONT-001" data-redirect-url="https://exogenadian.com/gracias.html"></script>
        <a href="https://wa.me/573156178610?text=Hola%2C%20quiero%20contratar%20el%20plan%20Contador%20(3%20Ex%C3%B3genas)%20de%20Ex%C3%B3gena%20DIAN" target="_blank" class="wompi-fallback" id="fallback-cont">Contratar por WhatsApp ‚Üí</a>
      </div>
    </div>
    <div class="price-card">
      <p class="price-label">Firma Contable</p>
      <h3 class="price-name">10 Ex√≥genas</h3>
      <div class="price-val"><span class="price-sign">$</span><span class="price-num">550.000</span></div>
      <p class="price-per">Pago √∫nico ¬∑ Hasta 10 empresas</p>
      <ul class="price-list">
        <li>10 balances procesados</li>
        <li>10 formatos por cada balance</li>
        <li>B√∫squeda de direcciones incluida</li>
        <li>Excel + XML para MUISCA</li>
        <li>Entrega prioritaria</li>
        <li class="hl">Solo $55.000 por ex√≥gena</li>
      </ul>
      <div class="wompi-btn-container">
        <script src="https://checkout.wompi.co/widget.js" data-render="button" data-public-key="pub_prod_GrX0IYZSq3PZUDCgQDYJTOJBgwUYbFbt" data-currency="COP" data-amount-in-cents="55000000" data-reference="EXOGENA-FIRMA-001" data-redirect-url="https://exogenadian.com/gracias.html"></script>
        <a href="https://wa.me/573156178610?text=Hola%2C%20quiero%20contratar%20el%20plan%20Firma%20Contable%20(10%20Ex%C3%B3genas)%20de%20Ex%C3%B3gena%20DIAN" target="_blank" class="wompi-fallback" id="fallback-firma">Contratar por WhatsApp ‚Üí</a>
      </div>
    </div>
  </div>
  <div class="price-foot">
    <p class="price-trust">üîí <span>Pago seguro procesado por Wompi</span> ¬∑ Respaldado por Bancolombia</p>
    <div class="pay-methods">
      <span>üí≥ Tarjeta cr√©dito / d√©bito</span>
      <span>üè¶ PSE</span>
      <span>üì± Nequi</span>
      <span>üíµ Efecty</span>
    </div>
  </div>
</section>



<!-- ===== ACTUALIDAD ===== -->
<section class="news fade-in" id="noticias">
  <div class="news-inner">
    <div class="section-tag">Actualidad</div>
    <h2 class="section-title">Noticias tributarias e inteligencia artificial</h2>
    <p class="section-desc">Lo √∫ltimo de los principales medios econ√≥micos de Colombia y del mundo de la IA.</p>

    <div class="news-grid" id="newsGrid">
      <div class="news-card" style="grid-column:span 3;text-align:center;padding:40px;color:var(--gray-400)">
        Cargando noticias...
      </div>
    </div>

    <div class="news-fuentes">
      Fuentes: <a href="https://www.portafolio.co" target="_blank">Portafolio</a> ¬∑
      <a href="https://www.larepublica.co" target="_blank">La Rep√∫blica</a> ¬∑
      <a href="https://www.bloomberglinea.com" target="_blank">Bloomberg L√≠nea</a> ¬∑
      <a href="https://www.eltiempo.com/economia" target="_blank">El Tiempo</a> ¬∑
      <a href="https://www.semana.com/economia" target="_blank">Semana</a> ¬∑
      <a href="https://hipertextual.com/categoria/tecnologia/inteligencia-artificial" target="_blank">Hipertextual IA</a> ¬∑
      <a href="https://www.xataka.com/tag/inteligencia-artificial" target="_blank">Xataka IA</a>
    </div>
  </div>
</section>

<!-- ===== CTA ===== -->
<section class="cta fade-in">
  <div class="cta-card">
    <h2>¬øListo para simplificar tu cierre fiscal?</h2>
    <p>Genera tu ex√≥gena en menos de 24 horas y usa nuestras calculadoras tributarias gratis.</p>
    <a href="#planes" class="btn-white">Contratar Ex√≥gena ‚Üó</a>
  </div>
</section>

<!-- ===== WHATSAPP ===== -->
<a href="https://wa.me/573156178610?text=Hola%2C%20estoy%20interesado%20en%20el%20servicio%20de%20Ex%C3%B3gena%20DIAN" target="_blank" class="wa-float" title="Escr√≠benos por WhatsApp">üí¨</a>

<!-- ===== FOOTER ===== -->
<footer>
  <div class="footer-inner">
    <div class="footer-grid">
      <div class="footer-brand">
        <h4>Ex√≥genaDIAN</h4>
        <p>Portal contable y tributario para contadores colombianos. Herramientas profesionales que simplifican el cierre fiscal.</p>
      </div>
      <div class="footer-col">
        <h5>Premium</h5>
        <a href="#exogena">Ex√≥gena DIAN</a>
        <a href="#exogena">Prevalidador XML</a>
        <a href="#herramientas">Estados Financieros</a>
      </div>
      <div class="footer-col">
        <h5>Gratis</h5>
        <a href="retencion350.html">Retenci√≥n en la Fuente</a>
        <a href="conciliacion.html">Conciliaci√≥n Bancaria</a>
        <a href="#noticias">Noticias Tributarias</a>
      </div>
      <div class="footer-col">
        <h5>Pr√≥ximamente</h5>
        <a href="#herramientas" style="opacity:.5">Declaraci√≥n IVA</a>
        <a href="#herramientas" style="opacity:.5">Declaraci√≥n Renta</a>
        <a href="#herramientas" style="opacity:.5">Estados Financieros</a>
      </div>
      <div class="footer-col">
        <h5>Contacto</h5>
        <a href="https://wa.me/573156178610" target="_blank">WhatsApp</a>
        <a href="/cdn-cgi/l/email-protection#ddb4b3bbb29db8a5b2bab8b3bcb9b4bcb3f3beb2b0"><span class="__cf_email__" data-cfemail="a0c9cec6cfe0c5d8cfc7c5cec1c4c9c1ce8ec3cfcd">[email&#160;protected]</span></a>
      </div>
    </div>
    <div class="footer-bottom">
      Ex√≥gena DIAN AG 2025 ¬∑ Resoluci√≥n 000227/2025 ¬∑ UVT $49.799<br>
      ‚ö†Ô∏è Herramienta de asistencia. El contador debe validar antes de presentar a la DIAN.<br>
      üîí Informaci√≥n tratada con total confidencialidad ‚Äî Ley 1581/2012 ¬∑ Hecho con üíö para contadores colombianos
    </div>
  </div>
</footer>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
/* === Nav scroll + mobile menu === */
const nav=document.getElementById('nav');
window.addEventListener('scroll',()=>nav.classList.toggle('scrolled',window.scrollY>20));
document.querySelectorAll('#navLinks a').forEach(a=>a.addEventListener('click',()=>{
  document.getElementById('navLinks').classList.remove('open');
}));

/* === Fade in observer === */
const obs=new IntersectionObserver(e=>{e.forEach(el=>{if(el.isIntersecting)el.target.classList.add('visible')})},{threshold:.1});
document.querySelectorAll('.fade-in').forEach(el=>obs.observe(el));

/* === Wompi: referencias √∫nicas + fallback si no carga === */
document.addEventListener('DOMContentLoaded',function(){
  const t=Date.now(),r=Math.random().toString(36).substring(2,8).toUpperCase();
  document.querySelectorAll('script[data-reference]').forEach((s,i)=>{
    const p=['IND','CONT','FIRMA'][i]||'GEN';
    s.setAttribute('data-reference','EXOG-'+p+'-'+t+'-'+r);
  });
  // Mostrar fallback si Wompi no renderiza botones despu√©s de 5 segundos
  setTimeout(function(){
    document.querySelectorAll('.wompi-btn-container').forEach(function(container){
      const hasWompiBtn = container.querySelector('form, button, [class*="wompi"], [class*="waybox"]');
      if(!hasWompiBtn){
        const fallback = container.querySelector('.wompi-fallback');
        if(fallback) fallback.style.display='block';
      }
    });
  }, 5000);
});

/* === NEWS FEED === */
async function cargarNoticias(){
  const grid=document.getElementById('newsGrid');
  const API='https://api.rss2json.com/v1/api.json?rss_url=';
  const feeds=[
    /* Tributarias / Econom√≠a Colombia */
    {url:'https://www.portafolio.co/rss/economia.xml',src:'Portafolio',dot:'ncd-blue',cat:'trib'},
    {url:'https://www.larepublica.co/rss/finanzas.xml',src:'La Rep√∫blica',dot:'ncd-red',cat:'trib'},
    {url:'https://www.bloomberglinea.com/feed/',src:'Bloomberg L√≠nea',dot:'ncd-purple',cat:'trib'},
    {url:'https://www.eltiempo.com/rss/economia.xml',src:'El Tiempo',dot:'ncd-blue',cat:'trib'},
    {url:'https://www.semana.com/rss/economia.xml',src:'Semana',dot:'ncd-red',cat:'trib'},
    /* Inteligencia Artificial (en espa√±ol) */
    {url:'https://hipertextual.com/categoria/tecnologia/inteligencia-artificial/feed',src:'Hipertextual',dot:'ncd-ai',cat:'ia'},
    {url:'https://wwwhatsnew.com/category/inteligencia-artificial/feed/',src:'WWWhat\'s New',dot:'ncd-ai',cat:'ia'},
    {url:'https://www.xataka.com/tag/inteligencia-artificial/feed',src:'Xataka',dot:'ncd-ai',cat:'ia'},
  ];
  let allTrib=[], allIA=[];
  try{
    const res=await Promise.allSettled(
      feeds.map(f=>fetch(API+encodeURIComponent(f.url)).then(r=>r.json()).then(d=>{
        if(d.status==='ok'&&d.items)return d.items.slice(0,4).map(i=>({t:i.title,l:i.link,d:i.pubDate,s:f.src,dot:f.dot,cat:f.cat}));
        return[];
      }).catch(()=>[]))
    );
    let all=[];
    res.forEach(r=>{if(r.status==='fulfilled')all=all.concat(r.value)});

    /* Dedup */
    const seen=new Set();
    all=all.filter(n=>{const k=n.t.toLowerCase().substring(0,40);if(seen.has(k))return false;seen.add(k);return true});

    allTrib=all.filter(n=>n.cat==='trib').sort((a,b)=>new Date(b.d)-new Date(a.d));
    allIA=all.filter(n=>n.cat==='ia').sort((a,b)=>new Date(b.d)-new Date(a.d));

    /* Max 2 por fuente para diversidad */
    function diversificar(arr){
      const porFuente={};
      return arr.filter(n=>{
        porFuente[n.s]=(porFuente[n.s]||0)+1;
        return porFuente[n.s]<=2;
      });
    }
    allTrib=diversificar(allTrib);
    allIA=diversificar(allIA);

    /* Combinar: 5 tributarias + 1 IA */
    let show=[];
    const nTrib=Math.min(allTrib.length, allIA.length>=1 ? 5 : 6);
    const nIA=Math.min(allIA.length, 1);
    show=show.concat(allTrib.slice(0,nTrib));
    show=show.concat(allIA.slice(0,nIA));

    /* Si no hay nada, fallback */
    if(show.length===0){
      grid.innerHTML='<div class="news-card" style="grid-column:span 3;text-align:center;padding:32px;color:var(--gray-400)">Visita las fuentes en los enlaces de abajo</div>';
      return;
    }

    grid.innerHTML=show.map(n=>{
      const rel=tiempoRelativo(new Date(n.d));
      return `<div class="news-card">
        <div class="news-card-top">
          <div class="news-card-source"><div class="news-card-dot ${n.dot}"></div>${n.s}</div>
          <div class="news-card-date">${rel}</div>
        </div>
        <h3><a href="${n.l}" target="_blank" rel="noopener">${n.t}</a></h3>
      </div>`;
    }).join('');

  }catch(e){
    grid.innerHTML='<div class="news-card" style="grid-column:span 3;text-align:center;padding:32px;color:var(--gray-400)">Visita las fuentes en los enlaces de abajo</div>';
  }
}

function tiempoRelativo(d){
  const s=Math.floor((Date.now()-d)/1000);
  if(s<60)return 'Ahora';
  if(s<3600)return Math.floor(s/60)+'m';
  if(s<86400)return Math.floor(s/3600)+'h';
  if(s<604800)return Math.floor(s/86400)+'d';
  return d.toLocaleDateString('es-CO',{day:'numeric',month:'short'});
}

cargarNoticias();
</script>

</body>
</html>
